
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>转：iOS中的正则表达式 - Alpine Blog</title>
	<meta name="author" content="zy">

	
	<meta name="description" content="转：iOS中的正则表达式 转自lady-奕奕：正则表达式在iOS中的运用 一、什么是正则表达式 正则表达式，又称正规表示法，是对字符串操作的一种逻辑公式。正则表达式可以检测给定的字符串是否符合我们定义的逻辑，也可以从字符串中获取我们想要的特定部分。它可以迅速地用极简单的方式达到字符串的复杂控制 &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Alpine Blog" type="application/atom+xml">
	
	<link rel="canonical" href="http://githubdelegate.github.io/blog/2015/12/03/zhuan-:ioszhong-de-zheng-ze-biao-da-shi/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	
</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		document.write("<img src='http://www.gravatar.com/avatar/" + MD5("") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
	</script>
</div>
<h1><a href="/">Alpine Blog</a></h1>
<p class="subtitle">keep learning</p>
<nav id="main-nav"><ul class="main">
    <li><a href="/">Blog</a></li>
    <li><a href="http://about.me/shashankmehta">About</a></li>
    <li><a href="/blog/archives">Archives</a></li>
</ul></nav>
<nav id="sub-nav">
	<div class="social">
		
		
		
		
		
		<a class="github" href="https://github.com/githubdelegate" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>

</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">转：iOS中的正则表达式</h1>
	<div class="entry-content" itemprop="articleBody"><h1>转自lady-奕奕：<a href="http://my.oschina.net/u/1245365/blog/376517">正则表达式在iOS中的运用</a></h1>

<h4>一、什么是正则表达式</h4>

<pre><code>  正则表达式，又称正规表示法，是对字符串操作的一种逻辑公式。正则表达式可以检测给定的字符串是否符合我们定义的逻辑，也可以从字符串中获取我们想要的特定部分。它可以迅速地用极简单的方式达到字符串的复杂控制。
</code></pre>

<h4>二、正则表达式的语法</h4>

<p>看一个过滤纯数字的例子</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>- (BOOL)validateNumber:(NSString *) textString
</span><span class='line'>{
</span><span class='line'>    NSString* number=@"^[0-9]+$";
</span><span class='line'>    NSPredicate *numberPre = [NSPredicate predicateWithFormat:@"SELF MATCHES %@",number];
</span><span class='line'>    return [numberPre evaluateWithObject:textString];
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>其中下述语句就是一个正则表达式</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>@"^[0-9]+$"
</span></code></pre></td></tr></table></div></figure>


<p>它代表了字符串中只能包含>=1个0-9的数字，语法是不是有一些怪异？</p>

<pre><code> 下面我们先撇开iOS中的正则表达式的语法，用通俗的正则表达式语法来为介绍一下。（iOS语法与通俗的正则表达式语法相同，不同在于对转义字符的处理上(语言类的都相同)）
</code></pre>

<p>语法：</p>

<pre><code>首先，符号'^'和'$'。他们分别指出一个字符串的开始和结束。eg：
"^one"：表示所有以"one"开始的字符串（"one cat"，"one123"，·····）；
类似于:- (BOOL)hasPrefix:(NSString *)aString;
"a dog$"：表示所以以"a dog"结尾的字符串（"it is a dog"，·····）；
类似于:- (BOOL)hasSuffix:(NSString *)aString;
"^apple$"：表示开始和结尾都是"apple"的字符串，这个是唯一的~；
"banana"：表示任何包含"banana"的字符串。
类似于 iOS8的新方法- (BOOL)containsString:(NSString *)aString,搜索子串用的。
'*'，'+'和'?'这三个符号，表示一个或N个字符重复出现的次数。它们分别表示“没有或
更多”（[0,+∞]取整），“一次或更多”（[1,+∞]取整），“没有或一次”（[0,1]取整）。下面是几个例子：
"ab*"：表示一个字符串有一个a后面跟着零个或若干个b（"a", "ab", "abbb",……）；
"ab+"：表示一个字符串有一个a后面跟着至少一个b或者更多（ "ab", "abbb",……）；
"ab?"：表示一个字符串有一个a后面跟着零个或者一个b（ "a", "ab"）；
"a?b+$"：表示字符串以零个或一个a跟着一个或几个b结尾（ "b", "ab","bb","abb",……）。
可以用大括号括起来（{}），表示一个重复的具体范围。例如
"ab{4}"：表示一个字符串有一个a跟着4个b（"abbbb"）；
"ab{1,}"：表示一个字符串有一个a跟着至少1个b（"ab","abb","abbb",……)；
"ab{3,4}"：表示一个字符串有一个a跟着3到4个b（"abbb","abbbb")。
那么，“*”可以用{0，}表示，“+”可以用{1，}表示，“?”可以用{0，1}表示
注意：可以没有上限，但是不能没有下限！例如“ab{,5}”是错误的写法
" | "表示“或”操作：
"a|b"：表示一个字符串里有"a"或者"b"；
"(a|bcd)ef"：表示"aef"或"bcdef"；
"(a|b)*c"：表示一串"a""b"混合的字符串后面跟一个"c"；

方括号"[ ]"表示在括号内的众多字符中，选择1-N个括号内的符合语法的字符作为结果，例如
"[ab]"：表示一个字符串有一个"a"或"b"（相当于"a|b"）；
"[a-d]"：表示一个字符串包含小写的'a'到'd'中的一个（相当于"a|b|c|d"或者"[abcd]"）；
"^[a-zA-Z]"：表示一个以字母开头的字符串；
"[0-9]a"：表示a前有一位的数字；
"[a-zA-Z0-9]$"：表示一个字符串以一个字母或数字结束。
"."匹配除“\r\n”之外的任何单个字符：
"a.[a-z]"：表示一个字符串有一个"a"后面跟着一个任意字符和一个小写字母；
"^.{5}$"：表示任意1个长度为5的字符串；

"\num" 其中num是一个正整数。表示"\num"之前的字符出现相同的个数，例如
"(.)\1"：表示两个连续的相同字符。
"10\{1,2\}” : 表示数字1后面跟着1或者2个0 ("10","100")。
" 0\{3,\} " 表示数字为至少3个连续的0 （“000”，“0000”，······）。
在方括号里用'^'表示不希望出现的字符，'^'应在方括号里的第一位。
"@[^a-zA-Z]@"表示两个"@"中不应该出现字母）。

常用的还有：
" \d "匹配一个数字字符。等价于[0-9]。
“ \D”匹配一个非数字字符。等价于[^0-9]。
" \w "匹配包括下划线的任何单词字符。等价于“[A-Za-z0-9_]”。
“ \W ”匹配任何非单词字符。等价于“[^A-Za-z0-9_]”。
</code></pre>

<p><strong>iOS中书写正则表达式，碰到转义字符，多加一个“\”,例如：全数字字符：@&ldquo;^\d+$&rdquo;</strong></p>

<h4>三、iOS中正则表达式</h4>

<p>1.正则表达式与NSPredicate连用，eg：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>- (BOOL)validateNumber:(NSString *) textString
</span><span class='line'>{
</span><span class='line'>    NSString* number=@"^[0-9]+$";
</span><span class='line'>    NSPredicate *numberPre = [NSPredicate predicateWithFormat:@"SELF MATCHES %@",number];
</span><span class='line'>    return [numberPre evaluateWithObject:textString];
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>2.NSString方法</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>- (NSRange)rangeOfString:(NSString *)aString options:(NSStringCompareOptions)mask;
</span><span class='line'>NSString *searchText = @"rangeOfString";
</span><span class='line'>NSRange range = [searchText rangeOfString:@"^[0-9]+$" options:NSRegularExpressionSearch];
</span><span class='line'>if (range.location != NSNotFound) {
</span><span class='line'>   NSLog(@"range ：%@", [searchText substringWithRange:range]);
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>3.正则表达式类（NSRegularExpression）</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>NSString *searchText = @"you want to match";    
</span><span class='line'>NSError *error = NULL;
</span><span class='line'>NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"^[0-9]+$" options:NSRegularExpressionCaseInsensitive error:&error];
</span><span class='line'>NSTextCheckingResult *result = [regex firstMatchInString:searchText options:0 range:NSMakeRange(0, [searchText length])];
</span><span class='line'>if (result) {
</span><span class='line'>   NSLog(@"%@", [searchText substringWithRange:result.range]);
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<h4>四、常用的正则表达式</h4>

<pre><code>以下红色字符串是常用的正则表达式（以下正则表达式来自百度百科） 


1.验证用户名和密码："^[a-zA-Z]\w{5,15}$" 
2.验证电话号码：（"^(\\d{3,4}-)\\d{7,8}$"）
eg：021-68686868  0511-6868686；
3.验证手机号码："^1[3|4|5|7|8][0-9]\\d{8}$"；
4.验证身份证号（15位或18位数字）："\\d{14}[[0-9],0-9xX]"；
5.验证Email地址：("^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\.\\w+([-.]\\w+)*$")；
6.只能输入由数字和26个英文字母组成的字符串：("^[A-Za-z0-9]+$") ;
7.整数或者小数：^[0-9]+([.]{0,1}[0-9]+){0,1}$
8.只能输入数字："^[0-9]*$"。
9.只能输入n位的数字："^\\d{n}$"。
10.只能输入至少n位的数字："^\\d{n,}$"。
11.只能输入m~n位的数字："^\\d{m,n}$"。
12.只能输入零和非零开头的数字："^(0|[1-9][0-9]*)$"。
13.只能输入有两位小数的正实数："^[0-9]+(.[0-9]{2})?$"。
14.只能输入有1~3位小数的正实数："^[0-9]+(\.[0-9]{1,3})?$"。
15.只能输入非零的正整数："^\+?[1-9][0-9]*$"。
16.只能输入非零的负整数："^\-[1-9][]0-9"*$。
17.只能输入长度为3的字符："^.{3}$"。
18.只能输入由26个英文字母组成的字符串："^[A-Za-z]+$"。
19.只能输入由26个大写英文字母组成的字符串："^[A-Z]+$"。
20.只能输入由26个小写英文字母组成的字符串："^[a-z]+$"。
21.验证是否含有^%&amp;',;=?$\"等字符："[^%&amp;',;=?$\x22]+"。
22.只能输入汉字："^[\u4e00-\u9fa5]{0,}$"。
23.验证URL："^http://([\\w-]+\.)+[\\w-]+(/[\\w-./?%&amp;=]*)?$"。
24.验证一年的12个月："^(0?[1-9]|1[0-2])$"正确格式为："01"～"09"和"10"～"12"。
25.验证一个月的31天："^((0?[1-9])|((1|2)[0-9])|30|31)$"正确格式 为；"01"～"09"、"10"～"29"和“30”~“31”。
26.获取日期正则表达式：\\d{4}[年|\-|\.]\\d{\1-\12}[月|\-|\.]\\d{\1-\31}日?
评注：可用来匹配大多数年月日信息。
27.匹配双字节字符(包括汉字在内)：[^\x00-\xff]
评注：可以用来计算字符串的长度（一个双字节字符长度计2，ASCII字符计1）
28.匹配空白行的正则表达式：\n\s*\r
评注：可以用来删除空白行
29.匹配HTML标记的正则表达式：&lt;(\S*?)[^&gt;]*&gt;.*?&lt;/&gt;|&lt;.*? /&gt;
评注：网上流传的版本太糟糕，上面这个也仅仅能匹配部分，对于复杂的嵌套标记依旧无能为力
30.匹配首尾空白字符的正则表达式：^\s*|\s*$
评注：可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式
31.匹配网址URL的正则表达式：[a-zA-z]+://[^\s]*
评注：网上流传的版本功能很有限，上面这个基本可以满足需求
32.匹配帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]{4,15}$
评注：表单验证时很实用
33.匹配腾讯QQ号：[1-9][0-9]\{4,\}
评注：腾讯QQ号从10 000 开始
34.匹配中国邮政编码：[1-9]\\d{5}(?!\d)
评注：中国邮政编码为6位数字
35.匹配ip地址：((2[0-4]\\d|25[0-5]|[01]?\\d\\d?)\.){3}(2[0-4]\\d|25[0-5]|[01]?\\d\\d?)。
</code></pre>

<h4>五、正则表达式练习网站</h4>

<ol>
<li><a href="http://regexper.com/">Regexper</a> 图形化的显示正则表达式</li>
<li><a href="http://tool.oschina.net/regex">在线正则表达式测试</a></li>
</ol>

</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style addthis_16x16_style">
	
	
	
	<a class="addthis_button_twitter"></a>
	
	
	
	<a class="addthis_button_compact"></a>
	<a class="addthis_counter addthis_bubble_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2015

    zy


Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'alpinezy';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://githubdelegate.github.io/blog/2015/12/03/zhuan-:ioszhong-de-zheng-ze-biao-da-shi/';
        var disqus_url = 'http://githubdelegate.github.io/blog/2015/12/03/zhuan-:ioszhong-de-zheng-ze-biao-da-shi/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





		</div>
	</div>
</body>
</html>
